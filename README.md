# geometry-3d

This package is a simple toolkit for performing some geometric operations in three-dimensional space.

## Namespaces

Several functionalities are exported under different namespaces.

    import * as geom from 'geometry-3d'; // 3D and 2D functions directly, vector functions in geom.Vector

    import * as geom from 'geometry-3d/3d'; // 3D functions directly

    import * as geom from 'geometry-3d/2d'; // 2D functions directly

    import * as Vector from 'geometry-3d/vector'; // Vector functions directly

Within these namespaces, some functions are exported under different names than those in the [API](#API) section to avoid unnecessary suffixing. In particular:

### `geometry-3d/vector`

Importing from this namespace makes all vector functions available. These are all named exactly as documented in the API section.

### `geometry-3d/2d`

Importing from this namespace makes all functions operating in two dimensions available. Renames:

*   [`contains2D`](#contains2d) is exported as `contains`

### `geometry-3d/3d`

Importing from this namespace makes all functions operating in three dimensions available. Renames:

*   [`contains3D`](#contains3d) is exported as `contains`

### `geometry-3d`

This is the default namespace. It imports the same things as the `geometry-3d/3d` and the `geometry-3d/2d` namespaces. `contains2D` and `contains3D` are not renamed. Additionally, it imports everything from `geometry-3d/vector` as `Vector`.

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [contains2D](#contains2d)
    *   [Parameters](#parameters)
*   [contains3D](#contains3d)
    *   [Parameters](#parameters-1)
*   [convertDown](#convertdown)
    *   [Parameters](#parameters-2)
*   [convertUp](#convertup)
    *   [Parameters](#parameters-3)
*   [cut](#cut)
    *   [Parameters](#parameters-4)
*   [dist](#dist)
    *   [Parameters](#parameters-5)
*   [dist2](#dist2)
    *   [Parameters](#parameters-6)
*   [fuse](#fuse)
    *   [Parameters](#parameters-7)
*   [normal](#normal)
    *   [Parameters](#parameters-8)
*   [project](#project)
    *   [Parameters](#parameters-9)
*   [smooth](#smooth)
    *   [Parameters](#parameters-10)
*   [triangulate](#triangulate)
    *   [Parameters](#parameters-11)
*   [Vector](#vector)
*   [ZERO](#zero)
*   [add](#add)
    *   [Parameters](#parameters-12)
*   [subtract](#subtract)
    *   [Parameters](#parameters-13)
*   [scale](#scale)
    *   [Parameters](#parameters-14)
*   [dot](#dot)
    *   [Parameters](#parameters-15)
*   [cross](#cross)
    *   [Parameters](#parameters-16)
*   [length](#length)
    *   [Parameters](#parameters-17)
*   [length2](#length2)
    *   [Parameters](#parameters-18)

### contains2D

Checks whether `point` is inside `polygon` according to the even-odd rule. Points on an edge are considered inside.

#### Parameters

*   `polygon` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The polygon to check for.
*   `point` **[Vector](#vector)** The point to check for containment.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** `true` if the point is inside the polygon, `false` otherwise.

### contains3D

Checks whether `point` is inside `polygon` according to the even-odd rule. Points on an edge are considered inside.
Points that are not on `polygon`'s plane are considered outside.

#### Parameters

*   `polygon` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** A planar polygon to check containment for. No check is performed whether `polygon` is actually planar.
    If it isn't, points will be considered on the polygon's plane if they lie on the best-fit plane of the polygon's vertices.
*   `point` **[Vector](#vector)** The point to check.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** `true` if `point` lies on `polygon`'s plane and is contained within its boundaries, `false` otherwise.

### convertDown

Reduces `vertices` to a lower number of dimensions by discarding the `axis` coordinate.
Mathematically this is a projection to the axis-aligned plane that is perpendicular to `axis`, but to avoid confusion
with the `project` function, this function avoids the term in its name.

#### Parameters

*   `vertices` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The vertices to bring to a lower dimensionality.
*   `axis` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The coordinate to remove. If this is larger than the current number of dimensions of `vertices`,
    this function will return `vertices` unchanged.

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** A list of vertices, with each vertex having all coordinates except `axis`.

### convertUp

Raises `vertices` to a higher number of dimensions by introducing an `axis` coordinate.

#### Parameters

*   `vertices` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The vertices to bring to a higher dimensionality.
*   `axis` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The zero-based index of the dimension to add. Setting `axis` to 0, for
    instance, would insert the new dimension at the beginning. If this is larger than the current number
    of dimensions of `vertices`, one new dimension will be added at the end, i.e. `axis` in that case will be
    treated as if it is the current number of dimensions plus one.
*   `coord` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The initial value to set the new coordinate to. (optional, default `0`)

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** A list of vertices, with each vertex having all coordinates of its
original as well as a new dimension set to `coord`.

### cut

Cuts the triangle `tri` along the plane defined by `normal` and `distance`. The result is an object containing
an array for all vertices above-or-on the cut plane and below-or-on the cut plane, respectively. For edges crossing
the cut plane, the edge's intersection point with the cut plane is added.

If the triangle does not intersect with the cut plane, one of `above` or `below` will be empty.
If the triangle is co-planar with the cut plane, it will be returned in both `above` and `below`.

#### Parameters

*   `tri` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The triangle to cut.
*   `normal` **[Vector](#vector)** The normal vector of the cut plane.
*   `distance` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The distance of the cut plane from the origin.

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object containing two arrays of Vertices making up the results of the cut: those
one the greater-than-or-equal side of the cut plane (`above`), and those on the less-than-or-equal side (`below`).

### dist

Returns the distance between points `p` and `q`.

#### Parameters

*   `p` &#x20;
*   `q` &#x20;

### dist2

Returns the **square** of the distance between points `p` and `q`.

#### Parameters

*   `p` &#x20;
*   `q` &#x20;

### fuse

Fuses any vertices in `vertices` that are closer together than specified by the threshold. Specifically, for any consecutive pair of vertices
`u` and `v`, if the square of the length of `u - v` is less than `threshold`, `u` will be removed from the result.

#### Parameters

*   `vertices` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The list of vertices
*   `threshold` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The **square** of the minimum distance between vertices.

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The input with vertices that were close together fused.

### normal

The normal of the polygon. If the polygon is not planar, it will return the normal of a "best fit" plane
to the polygon's vertices. If the polygon has less than three vertices, the normal is undefined.

#### Parameters

*   `polygon` &#x20;

### project

Projects `polygon` onto the plane defined by `normal` and `distance` along the `axis`.

Intuitively, this can be though of as following each vertex of `polygon` in the direction of `axis` until it intersects with
the projection plane.

#### Parameters

*   `polygon` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The polygon to project.
*   `normal` **[Vector](#vector)** The normal vector of the plane to project onto.
*   `distance` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The distance of the plane to the origin.
*   `axis` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The axis along which to project. Can be `0` for the x axis, `1` for the y axis, or `2` for the z axis.

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The polygon, projected onto the plane.

### smooth

Smoothes `poly` by finding and removing aberrant chains. An aberrant chain is a series of vertices such that the first and the last
vertex are very close together. After removal, only the start vertex will remain in the result.

To improve efficiency, chain length is capped at `lookahead`. This is number is actually the *maximum* lookahead.
The actual lookahead may be lower if polygon length is less than `lookahead - 1`. This is necessary because traversing the entire polygon
will *always* result in an aberrant chain, with the end vertex being the start vertex after a full circumnavigation.

#### Parameters

*   `poly` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The polygon from which to remove aberrant chains.
*   `threshold` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The **square** of the maximum distance between the start and the end of an aberrant chain. Vertices must
    be at most the (square root of this) distance apart for the series to be considered aberrant and removed.
*   `lookahead` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The maximum number of vertices to look ahead to find a possible end vertex.

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The polygon, with aberrant chains removed after their first vertex.

### triangulate

Breaks the two-dimensional polygon up into triangles.

#### Parameters

*   `polygon` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Vector](#vector)>** The polygon to break up into triangles.

<!---->

*   Throws **any** If `polygon` has less than three vertices, or is not two-dimensional.

### Vector

A vector in an arbitrary number of dimensions, most typically in 2-space or 3-space.

Type: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>

### ZERO

The origin vector: `[0,0,0]`.

### add

Adds `u` and `v`.

Works in any dimension, but note that for performance reasons no check is performed to see that `u` and `v` have the same dimension.

#### Parameters

*   `u` &#x20;
*   `v` &#x20;

### subtract

Subtracts `v` from `u`.

Works in any dimension, but note that for performance reasons no check is performed to see that `u` and `v` have the same dimension.

#### Parameters

*   `u` &#x20;
*   `v` &#x20;

### scale

Multiplies vector `v` with scalar `a`.

Works in any dimension, but note that for performance reasons no check is performed to see that `u` and `v` have the same dimension.

#### Parameters

*   `v` &#x20;
*   `a` &#x20;

### dot

Calculates the dot product of `u` and `v`.

Works in any dimension, but note that for performance reasons no check is performed to see that `u` and `v` have the same dimension.

#### Parameters

*   `u` &#x20;
*   `v` &#x20;

### cross

Calculates the cross product of `u` and `v`.

This only works in three dimensions, but note that for performance reasons no check is performed.

#### Parameters

*   `u` &#x20;
*   `v` &#x20;

### length

Returns the length of the vector `v`.

Works in any dimension.

#### Parameters

*   `v` &#x20;

### length2

Returns the square of the length of `v`.

`Math.sqrt` is an expensive operation, and many computations can just as well be performed with the squared length.

Works in any dimension.

#### Parameters

*   `v` &#x20;
